<div class="container-fluid">
  <div class="row d-flex justify-content-center">
    <div class="col-md-10">
      <br>
      <h2 class="text-center">ข้อมูลการลงทะเบียน</h2>

      <!-- <form> -->
      <div class="row">
        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput" (keypress)="numberOnly($event)" >เลขบัตรประชาชน</label>
            <input type="text" (keypress)="numberOnly($event)" [(ngModel)]="idcard" name="txtID" class="form-control input-sm"  placeholder="เลขบัตรประชาชน" />
          </div>
          <div class="row">
            <div class="col-md-4">
              <span>รหัสบัตรประชน : {{idcard}}</span>
            </div>
            <div class="col-md-4">
              <span>เพศ : {{sex}} </span>
            </div>
            <div class="col-md-4">
              <span>คำนำหน้า : {{title}}</span>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <span>{{firstname}}</span>
            </div>
            <div class="col-md-6">
              <span>{{lastname}}</span>
            </div>
          </div>
          <!-- <button class="btn" (click)="testfunction()">testfunction</button> -->

          <br>
          <!-- <input [(ngModel)]="testC"  onkeyup="searchid()" class="form-control input-sm">
          <span>{{testC}}</span> -->

        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">เพศ</label>
            <select  [(ngModel)]="sex" class="form-control input-sm">
              <option value="" selected disabled>เลือก</option>
              <option value="F">ชาย</option>
              <option value="M">หญิง</option>
            </select>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">หมู่โลหิต</label>
            <select [(ngModel)]="blood" class="form-control input-sm">
              <option value="" selected disabled>เลือก</option>
              <option value="1">เอ</option>
              <option value="2">บี</option>
              <option value="3">เอบี</option>
              <option value="4">โอ</option>
            </select>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">คำนำหน้าชื่อ</label>
            <select [(ngModel)]="title" class="form-control input-sm" placeholder="เลขบัตรประชาชน">
              <option value="" selected disabled>เลือก</option>
              <option value="1">นาย</option>
              <option value="2">นาง</option>
              <option value="3">นางสาว</option>
            </select>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">ชื่อตัวไทย</label>
            <input [(ngModel)]="firstname" onkeyup="isThaichar(this.value,this)"
              class="form-control input-sm" placeholder="ชื่อตัวไทย"
              [ngClass]="{ 'is-invalid': submitted && f.firstname.errors }" />
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">ชื่อสกุลไทย</label>
            <input [(ngModel)]="lastname" onkeyup="isThaichar(this.value,this)"
              class="form-control input-sm" placeholder="ชื่อสกุลไทย"
              [ngClass]="{ 'is-invalid': submitted && f.lastname.errors }" />
          </div>
        </div>
      </div>
      <div class="row">
        <div class="form-group hidden">
          <div class="input-group">
            <input type="hidden" name="datepicker" class="form-control" ngbDatepicker #datepicker="ngbDatepicker"
              [autoClose]="'outside'" (dateSelect)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t"
              outsideDays="hidden" [startDate]="fromDate">
            <ng-template #t let-date let-focused="focused">
              <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)"
                [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date"
                (mouseleave)="hoveredDate = null">
                {{ date.day }}
              </span>
            </ng-template>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">วันเกิด จาก</label>
            <div class="input-group">
              <input #dpFromDate class="form-control" placeholder="yyyy-mm-dd" name="dpFromDate"
                onkeyup="searchdpFromDate()" [value]="formatter.format(fromDate)"
                (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button"></button>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">ถึง</label>
            <div class="input-group">
              <input #dpToDate class="form-control" placeholder="yyyy-mm-dd" name="dpToDate" onkeyup="searchdpToDate()"
                [value]="formatter.format(toDate)" (input)="toDate = validateInput(toDate, dpToDate.value)">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button"></button>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">จำนวนรายการ/หน้า</label>
            <select id="frompang" onkeyup="searchfrompang()" class="form-control input-sm">
              <option value="" selected disabled>เลือก</option>
              <option value="5">5</option>
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>
        </div>
      </div>
      <!-- </form> -->

      <!-- <br>
      <hr/>
      <pre>From date model: {{ fromDate | json }}</pre>
      <pre>To date model: {{ toDate | json }}</pre> -->

      <br>
      <div class="row">
        <div class="col-md-3">
          <div class="float-right">
            <!-- <button class="btn btn-outline-primary btn-block"  (click)="addUser()">เพิ่มข้อมูลทะเบียน</button> -->
          </div>
        </div>
        <div class="col-md-5">
          <div class="float-left">
            <button class="btn btn-outline-primary btn-block1" onclick="myFunction(test)">ค้นหา</button>
          </div>
          <div class="float-right">
            <!-- <button onclick="document.getElementById('idcard').value = '', 
                             document.getElementById('lastname').value = '',
                             document.getElementById('firstname').value = ''">
                             Clear input field
            </button> -->
            <button class="btn btn-outline-primary btn-block2" onclick="
                            document.getElementById('idcard').value ='', 
                            document.getElementById('lastname').value = '',
                            document.getElementById('firstname').value = ''" type="refresh">
              ล้างข้อมูล

            </button>
          </div>
        </div>
        <div class="col-md-4">
          <div class="float-right">
            <button class="btn btn-outline-primary btn-block3" (click)="addUser()">เพิ่มข้อมูลทะเบียน</button>
          </div>
        </div>
      </div>

      <!-- <select [(ngModel)]="user.BLOOD">
          <option *ngFor="user of users" [value]="BLOOD.code">{{BLOOD.name}}</option>
        </select> -->
        
        <div class="row">
          <div class="col-md-12">
            <div class="float-right">
              <p></p>
              <button class="btn btn-outline-danger btn-block" (click)="submitForm()" type="submit" >ลบข้อมูล</button>
            </div>
          </div>
        </div>
        <br>

        <div class="row">
          <div class="col-md-12">
            <table datatable [dtOptions]="dtOptions" class="row-border hover" id="myTable">
              <thead>
                <tr>
                  <th scope="col" sortable="ID"> ลำดับ </th>
                  <th scope="col" sortable="DELETE" (sort)="onSort($event)"> </th>
                  <th scope="col" sortable="CITIZEN_ID" (sort)="onSort($event)"> เลขที่บัตรประชาชน <i
                      class="fa fa-fw fa-sort"></i> </th>
                  <th scope="col" sortable="TITLE" (sort)="onSort($event)"> คำนำหน้า <i class="fa fa-fw fa-sort"></i>
                  </th>
                  <th scope="col" sortable="FIRST_NAME" (sort)="onSort($event)"> ชื่อตัวไทย <i
                      class="fa fa-fw fa-sort"></i> </th>
                  <th scope="col" sortable="LAST_NAME" (sort)="onSort($event)"> ชื่อสกุลไทย <i
                      class="fa fa-fw fa-sort"></i> </th>
                  <th scope="col" sortable="SEX" (sort)="onSort($event)"> เพศ <i class="fa fa-fw fa-sort"></i> </th>
                  <th scope="col" sortable="BLOOD" (sort)="onSort($event)"> หมู่โลหิต <i class="fa fa-fw fa-sort"></i>
                  </th>
                  <th scope="col" sortable="BIRTH_DATE" (sort)="onSort($event)"> วันเกิด <i
                      class="fa fa-fw fa-sort"></i> </th>
                  <th scope="col"> รายละเอียด </th>
                </tr>
              </thead>
              <tbody *ngIf="userdet?.length != 0">
                <tr *ngFor="let user of userdet; let i = index">
                  <td>{{i+1}}</td>
                  <td>
                    <!-- <div class="custom-control form-control-lg custom-checkbox">
                            <input type="checkbox" class="custom-control-input" id="customCheck1">
                            <label class="custom-control-label" for="customCheck1"></label>
                        </div> -->
                    <input type="checkbox" [value]="user.ID" (change)="onCheckboxChange($event) " />
                  </td>
                  <td>{{user.CITIZEN_ID}}</td>
                  <td>{{user.TITLE}}</td>
                  <td>{{user.FIRST_NAME}}</td>
                  <td>{{user.LAST_NAME}}</td>
                  <td>{{user.SEX}}</td>
                  <td>{{user.BLOOD}}</td>
                  <td>{{user.BIRTH_DATE| date: 'dd/MM/yyyy'}}</td>
                  <td> <button class="btn btn-success" (click)="updatehistoryUser(user)" style="margin-left: 20px;">
                      Edit</button></td>

                </tr>
              </tbody>
              <tbody *ngIf="persons?.length == 0">
                <tr>
                  <td colspan="3" class="no-data-available">ไม่พบข้อมูล !!!</td>
                </tr>
              <tbody>
                <!-- <thead>
              <tr>
                <th scope="col" sortable="ID" > ลำดับ </th>
                <th scope="col" sortable="DELETE" (sort)="onSort($event)" >  </th>
                <th scope="col" sortable="CITIZEN_ID" (sort)="onSort($event)" > เลขที่บัตรประชาชน <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="TITLE" (sort)="onSort($event)" > คำนำหน้า <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="FIRST_NAME" (sort)="onSort($event)" > ชื่อตัวไทย <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="LAST_NAME" (sort)="onSort($event)" > ชื่อสกุลไทย <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="SEX" (sort)="onSort($event)" > เพศ <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="BLOOD" (sort)="onSort($event)" > หมู่โลหิต <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="BIRTH_DATE" (sort)="onSort($event)" > วันเกิด <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" > รายละเอียด  </th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let user of users; let i = index">
                <td>{{i+1}}</td>
                <td>
                  <div class="custom-control form-control-lg custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="customCheck1">
                      <label class="custom-control-label" for="customCheck1"></label>
                  </div>
                </td>
                <td>{{user.CITIZEN_ID}}</td>
                <td>{{user.TITLE}}</td>
                <td>{{user.FIRST_NAME}}</td>
                <td>{{user.LAST_NAME}}</td>
                <td>{{user.SEX}}</td>
                <td>{{user.BLOOD}}</td>
                <td>{{user.BIRTH_DATE| date: 'dd/MM/yyyy'}}</td>
                  <td>  <button class="btn btn-success" (click)="updatehistoryUser(user)" style="margin-left: 20px;"> Edit</button></td>
              </tr>
              </tbody> -->
            </table>
          </div>
        </div>
    </div>
  </div>
</div>