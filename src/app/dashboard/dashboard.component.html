<div class="container-fluid">
  <div class="row d-flex justify-content-center">
    <div class="col-md-10">
      <br>
      <h2 class="text-center">ข้อมูลการลงทะเบียน</h2>

      
      <!-- <form> -->
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label for="formGroupExampleInput" (keypress)="numberOnly($event)" >เลขบัตรประชาชน</label>
              <input type="text" (keypress)="numberOnly($event)" [(ngModel)]="search.CITIZEN_ID" name="txtID" class="form-control input-sm"  placeholder="เลขบัตรประชาชน" />
            </div>
  
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="formGroupExampleInput">เพศ</label>
              <ng-select [items]="sex" bindLabel="name" bindValue="id" placeholder="เลือก"  [(ngModel)]="search.SEX"> </ng-select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="formGroupExampleInput">หมู่โลหิต</label>
              <ng-select [items]="blood" bindLabel="name" bindValue="id" placeholder="เลือก" [(ngModel)]="search.BLOOD"> </ng-select>
            </div>
          </div>
        </div>
  
        <div class="row">
          <div class="col-md-4">
            <div class="form-group">
              <label for="formGroupExampleInput">คำนำหน้าชื่อ</label>
              <ng-select [items]="title" bindLabel="name" bindValue="id" placeholder="เลือก" [(ngModel)]="search.TITLE"> </ng-select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="formGroupExampleInput">ชื่อตัวไทย</label>
              <input [(ngModel)]="search.FIRST_NAME" onkeyup="isThaichar(this.value,this)"
                class="form-control input-sm" placeholder="ชื่อตัวไทย"
                [ngClass]="{ 'is-invalid': submitted && f.firstname.errors }" />
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="formGroupExampleInput">ชื่อสกุลไทย</label>
              <input [(ngModel)]="search.LAST_NAME" onkeyup="isThaichar(this.value,this)"
                class="form-control input-sm" placeholder="ชื่อสกุลไทย"
                [ngClass]="{ 'is-invalid': submitted && f.lastname.errors }" />
            </div>
          </div>
        </div>
  
        <span>{{search.TITLE}}</span>
        <span>{{search.SEX}}</span>
        <span>{{search.BLOOD}}</span>
        <span>{{search.FIRST_NAME}}</span>
        <span>{{search.LAST_NAME}}</span>
        <span>{{search.CITIZEN_ID}}</span>
      <div class="row">
        <div class="form-group hidden">
          <div class="input-group">
            <input type="hidden" name="datepicker" class="form-control" ngbDatepicker #datepicker="ngbDatepicker"
              [autoClose]="'outside'" (dateSelect)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t"
              outsideDays="hidden" [startDate]="fromDate">
            <ng-template #t let-date let-focused="focused">
              <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)"
                [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date"
                (mouseleave)="hoveredDate = null">
                {{ date.day }}
              </span>
            </ng-template>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">วันเกิด จาก</label>
            <div class="input-group">
              <input #dpFromDate class="form-control"  placeholder="dd-mm-yyyy" [value]="(fromDatetotal)"
                (input)="fromDatetotal = validateInput(fromDatetotal, dpFromDate.value)">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button"></button>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">ถึง</label>
            <div class="input-group">
              <input #dpToDate class="form-control"  placeholder="dd-mm-yyyy" 
                [value]="toDatetotal" (input)="toDatetotal = validateInput(toDatetotal, dpToDate.value)">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button"></button>
              </div>
            </div>
          </div>
        </div>
        <!-- {{search.toDate | json}} -->

        <!-- {{search.fromDate | json}} -->
        <div class="col-md-4">
          <div class="form-group">
            <label for="formGroupExampleInput">จำนวนรายการ/หน้า</label>
            <select id="frompang" onkeyup="searchfrompang()" class="form-control input-sm">
              <option value="" selected disabled>เลือก</option>
              <option value="5">5</option>
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="col-md-3">
          <div class="float-right">
          </div>
        </div>
        <div class="col-md-5">
          <div class="float-left">
            <!-- onclick="myFunction(test)" -->
            <button class="btn btn-outline-primary btn-block1" type="button" (click)="btn_submit()">ค้นหา</button>
          </div>
          <div class="float-right">
            <button class="btn btn-outline-primary btn-block2"  type="reset" value="Reset"> ล้างข้อมูล </button>
          </div>
        </div>
        <div class="col-md-4">
          <div class="float-right">
            <button class="btn btn-outline-primary btn-block3" (click)="addUser()">เพิ่มข้อมูลทะเบียน</button>
          </div>
        </div>
      </div>

        <div class="row">
          <div class="col-md-12">
            <div class="float-right">
              <p></p>
              <button class="btn btn-outline-danger btn-block" (click)="submitForm()" type="submit" >ลบข้อมูล</button>
            </div>
          </div>
        </div>
        <br>

        <div class="row">
          <div class="col-md-12">
            <table datatable [dtOptions]="dtOptions" class="row-border hover" id="myTable">
              <thead>
                <tr>
                  <th scope="col" sortable="ID"> ลำดับ </th>
                  <th scope="col" sortable="DELETE" (sort)="onSort($event)"> </th>
                  <th scope="col" sortable="CITIZEN_ID" (sort)="onSort($event)"> เลขที่บัตรประชาชน <i
                      class="fa fa-fw fa-sort"></i> </th>
                  <th scope="col" sortable="TITLE" (sort)="onSort($event)"> คำนำหน้า <i class="fa fa-fw fa-sort"></i>
                  </th>
                  <th scope="col" sortable="FIRST_NAME" (sort)="onSort($event)"> ชื่อตัวไทย <i
                      class="fa fa-fw fa-sort"></i> </th>
                  <th scope="col" sortable="LAST_NAME" (sort)="onSort($event)"> ชื่อสกุลไทย <i
                      class="fa fa-fw fa-sort"></i> </th>
                  <th scope="col" sortable="SEX" (sort)="onSort($event)"> เพศ <i class="fa fa-fw fa-sort"></i> </th>
                  <th scope="col" sortable="BLOOD" (sort)="onSort($event)"> หมู่โลหิต <i class="fa fa-fw fa-sort"></i>
                  </th>
                  <th scope="col" sortable="BIRTH_DATE" (sort)="onSort($event)"> วันเกิด <i
                      class="fa fa-fw fa-sort"></i> </th>
                  <th scope="col"> รายละเอียด </th>
                </tr>
              </thead>
              <tbody *ngIf="userdet?.length != 0">
                <tr *ngFor="let user of userdet | filter:user; let i = index">
                  <td>{{i+1}}</td>
                  <td>
                    <input type="checkbox" [value]="user.ID" (change)="onCheckboxChange($event) " />
                  </td>
                  <td>{{user.CITIZEN_ID}}</td>
                  <td>
                    <p *ngIf="user.TITLE == 1">นาย</p>
                    <p *ngIf="user.TITLE == 2">นาง</p>
                    <p *ngIf="user.TITLE == 3">นางสาว</p>
                  </td>
                  <td>{{user.FIRST_NAME}}</td>
                  <td>{{user.LAST_NAME}}</td>
                  <td>
                    <p *ngIf="user.SEX == 'M'">ชาย</p>
                    <p *ngIf="user.SEX == 'F'">หญิง</p>
                  </td>
                  <td>
                    <p *ngIf="user.BLOOD == 1">เอ</p>
                    <p *ngIf="user.BLOOD == 2">บี</p>
                    <p *ngIf="user.BLOOD == 3">เอบี</p>
                    <p *ngIf="user.BLOOD == 4">โอ</p>
                  </td>
                  <td>
                    <p *ngIf="user.BIRTH_DATE"></p>
                    <!-- {{user.BIRTH_DATE| date: 'วัน dd '}} -->
                    <!-- {{user.BIRTH_DATE| date: 'เดือน MM'}} -->
                    {{user.BIRTH_DATE | date:'dd/MM/yyyy'}}

                  </td>
                  <td> <button class="btn btn-success" (click)="updatehistoryUser(user)" style="margin-left: 20px;">
                      Edit</button></td>

                </tr>
              </tbody>
              <tbody *ngIf="persons?.length == 0">
                <tr>
                  <td colspan="3" class="no-data-available">ไม่พบข้อมูล !!!</td>
                </tr>
              <tbody>
                <!-- <thead>
              <tr>
                <th scope="col" sortable="ID" > ลำดับ </th>
                <th scope="col" sortable="DELETE" (sort)="onSort($event)" >  </th>
                <th scope="col" sortable="CITIZEN_ID" (sort)="onSort($event)" > เลขที่บัตรประชาชน <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="TITLE" (sort)="onSort($event)" > คำนำหน้า <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="FIRST_NAME" (sort)="onSort($event)" > ชื่อตัวไทย <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="LAST_NAME" (sort)="onSort($event)" > ชื่อสกุลไทย <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="SEX" (sort)="onSort($event)" > เพศ <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="BLOOD" (sort)="onSort($event)" > หมู่โลหิต <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" sortable="BIRTH_DATE" (sort)="onSort($event)" > วันเกิด <i class="fa fa-fw fa-sort"></i> </th>
                <th scope="col" > รายละเอียด  </th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let user of users; let i = index">
                <td>{{i+1}}</td>
                <td>
                  <div class="custom-control form-control-lg custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="customCheck1">
                      <label class="custom-control-label" for="customCheck1"></label>
                  </div>
                </td>
                <td>{{user.CITIZEN_ID}}</td>
                <td>{{user.TITLE}}</td>
                <td>{{user.FIRST_NAME}}</td>
                <td>{{user.LAST_NAME}}</td>
                <td>{{user.SEX}}</td>
                <td>{{user.BLOOD}}</td>
                <td>{{user.BIRTH_DATE| date: 'dd/MM/yyyy'}}</td>
                  <td>  <button class="btn btn-success" (click)="updatehistoryUser(user)" style="margin-left: 20px;"> Edit</button></td>
              </tr>
              </tbody> -->
            </table>
          </div>
        </div>
    </div>
  </div>
</div>